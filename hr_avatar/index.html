<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaltura HR Avatar - Interview & Separation Scenarios</title>

    <!-- Cache Control -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Styles (versioned for cache busting) -->
    <link rel="stylesheet" href="hr-demo.css?v=1.0.16">
</head>
<body>
    <div class="app">
        <!-- ================================================================
             HEADER
             ================================================================ -->
        <header>
            <h1>Kaltura HR Avatar</h1>
            <p>AI-Powered Interview & Separation Conversations</p>
        </header>

        <div class="main-container">
            <!-- ============================================================
                 SIDEBAR - Scenario Selection
                 Three categories of HR scenarios to choose from
                 ============================================================ -->
            <aside class="sidebar">
                <!-- Interview Scenarios -->
                <section class="scenario-section interview">
                    <h2><span class="icon">&#128100;</span> Interview Scenarios</h2>
                    <div class="scenario-list" id="interview-list">
                        <!-- Populated by JavaScript from SCENARIOS.interview -->
                    </div>
                </section>

                <!-- Post-Interview Scenarios -->
                <section class="scenario-section post-interview">
                    <h2><span class="icon">&#128222;</span> Post-Interview Calls</h2>
                    <div class="scenario-list" id="post-interview-list">
                        <!-- Populated by JavaScript from SCENARIOS.postInterview -->
                    </div>
                </section>

                <!-- Separation Scenarios -->
                <section class="scenario-section separation">
                    <h2><span class="icon">&#128221;</span> Separation Scenarios</h2>
                    <div class="scenario-list" id="separation-list">
                        <!-- Populated by JavaScript from SCENARIOS.separation -->
                    </div>
                </section>
            </aside>

            <!-- ============================================================
                 MAIN CONTENT - Avatar & Transcript
                 ============================================================ -->
            <main class="avatar-section">
                <!-- Scenario Details Panel (shows after selection) -->
                <div class="scenario-details" id="scenario-details" style="display: none;">
                    <!-- Populated by JavaScript: showScenarioDetails() -->
                </div>

                <!-- CV Upload Panel (shows for interview scenarios) -->
                <div class="cv-upload-panel" id="cv-upload-panel" style="display: none;">
                    <div class="cv-upload-header">
                        <span class="icon">&#128196;</span>
                        <span>Upload Candidate CV (Optional)</span>
                    </div>
                    <div class="cv-upload-area" id="cv-upload-area">
                        <input type="file" id="cv-file-input" accept=".pdf" hidden>
                        <label for="cv-file-input" class="cv-upload-label">
                            <span class="upload-icon">&#128194;</span>
                            <span class="upload-text">Click to upload PDF or drag & drop</span>
                        </label>
                    </div>
                    <div class="cv-status" id="cv-status" style="display: none;">
                        <span class="cv-filename" id="cv-filename"></span>
                        <button class="cv-remove-btn" id="cv-remove-btn" title="Remove CV">&#10005;</button>
                    </div>
                    <p class="cv-hint">The avatar will ask questions based on the CV content</p>
                    <button class="btn btn-start-interview" id="start-interview-btn">
                        <span>&#9654;</span> Start Interview
                    </button>
                </div>

                <!-- Avatar Container (SDK embeds iframe here) -->
                <div id="avatar-container" class="empty">
                    <div class="empty-state" id="empty-state">
                        <div class="icon">&#128104;&#8205;&#128188;</div>
                        <h3>Select a Scenario</h3>
                        <p>Choose an interview or separation scenario from the left to begin</p>
                    </div>
                </div>

                <!-- Status Info Panel -->
                <div class="info-panel">
                    <div class="info-item">
                        <span class="label">Status:</span>
                        <span class="value" id="status-value">Ready</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Scenario:</span>
                        <span class="value" id="scenario-value">None selected</span>
                    </div>
                </div>

                <!-- Transcript Panel -->
                <div class="transcript-panel">
                    <div class="transcript-header">
                        <h3>Conversation Transcript</h3>
                        <div class="transcript-actions">
                            <button class="btn btn-secondary" id="download-btn" disabled>
                                Download TXT
                            </button>
                            <button class="btn btn-secondary" id="download-md-btn" disabled>
                                Download MD
                            </button>
                        </div>
                    </div>
                    <div class="transcript-content" id="transcript-content">
                        <div class="transcript-empty" id="transcript-empty">
                            Conversation transcript will appear here...
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- ====================================================================
         SCRIPTS
         ==================================================================== -->
    <!-- PDF.js for client-side PDF text extraction -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

    <!-- Kaltura Avatar SDK (provides KalturaAvatarSDK class) -->
    <script src="../kaltura-avatar-sdk.js?v=1.0.0"></script>

    <!-- HR Demo Application (versioned for cache busting) -->
    <script src="hr-demo.js?v=1.0.16"></script>
</body>
</html>
